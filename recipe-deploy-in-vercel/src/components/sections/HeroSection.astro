---
import { Separator } from "@/ui/separator";
import { TranslatedText } from "@/components/TranslatedText";
import { Button } from "@/ui/button";
import { readFileSync } from "fs";
import { fileURLToPath } from "url";
import { dirname, join } from "path";

const __filename = fileURLToPath(import.meta.url);
const __dirname = dirname(__filename);
const packageJsonPath = join(__dirname, "../../../package.json");
const packageJson = JSON.parse(readFileSync(packageJsonPath, "utf8"));
const version = packageJson.version;
---

<header class="space-y-6 md:space-y-8 text-center animate-fadeIn">
  <div
    class="inline-block px-3 py-1 rounded-full bg-primary/10 text-primary text-sm font-medium mb-2 animate-fadeInUp animation-delay-100"
  >
    v{version}
  </div>

  <h1
    class="text-4xl md:text-5xl lg:text-6xl font-bold tracking-tight bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent animate-gradientFlow"
  >
    <TranslatedText textKey="appName" client:load />
  </h1>

  <p
    class="text-muted-foreground text-lg md:text-xl max-w-3xl mx-auto animate-fadeInUp animation-delay-200"
  >
    <TranslatedText textKey="description" client:load />
  </p>

  <!-- Comando de instalación -->
  <div class="mt-8 mb-4 animate-fadeInUp animation-delay-250 max-w-3xl mx-auto">
    <div class="bg-card border rounded-lg p-4 md:p-6">
      <h3 class="text-lg md:text-xl font-semibold mb-3">Crear un proyecto</h3>
      <pre
        class="bg-muted p-3 rounded-md text-left overflow-x-auto mb-2"><code>bunx @hkxdv/astro-shade-dx-template</code></pre>
      <p class="text-sm text-muted-foreground mb-3">Con opciones:</p>
      <pre
        class="bg-muted p-3 rounded-md text-left overflow-x-auto"><code>bunx @hkxdv/astro-shade-dx-template &lt;project-name&gt; [options]</code></pre>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mt-4 text-left text-sm">
        <div class="bg-muted/50 p-2 rounded">
          <span class="font-mono text-primary">--demo</span>
          <span class="text-muted-foreground"
            >Plantilla con componentes (Este proyecto)</span
          >
        </div>
        <div class="bg-muted/50 p-2 rounded">
          <span class="font-mono text-primary">--base</span>
          <span class="text-muted-foreground">Plantilla mínima esencial</span>
        </div>
        <div class="bg-muted/50 p-2 rounded">
          <span class="font-mono text-primary">--eslint</span>
          <span class="text-muted-foreground">Configurar ESLint + Prettier</span
          >
        </div>
        <div class="bg-muted/50 p-2 rounded">
          <span class="font-mono text-primary">--biome</span>
          <span class="text-muted-foreground"
            >Configurar Biome (recomendado)</span
          >
        </div>
      </div>
    </div>
  </div>

  <div
    class="flex flex-col sm:flex-row justify-center gap-4 pt-4 animate-fadeInUp animation-delay-300"
  >
    <Button variant="default" size="lg" className="gap-2 w-full sm:w-auto">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-github"
        ><path
          d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
        ></path><path d="M9 18c-4.51 2-5-2-7-2"></path></svg
      >
      <a
        href="https://github.com/hkxdv/astro-shade-dx-template"
        target="_blank"
        rel="noopener noreferrer"
        class="w-full"
      >
        GitHub
      </a>
    </Button>

    <Button variant="outline" size="lg" className="gap-2 w-full sm:w-auto">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-server"
        ><rect width="20" height="8" x="2" y="2" rx="2" ry="2"></rect><rect
          width="20"
          height="8"
          x="2"
          y="14"
          rx="2"
          ry="2"></rect><line x1="6" x2="6.01" y1="6" y2="6"></line><line
          x1="6"
          x2="6.01"
          y1="18"
          y2="18"></line></svg
      >
      <a href="/ssr-demo" class="w-full"> Demo SSR </a>
    </Button>
  </div>

  <Separator
    client:load
    className="mt-6 animate-fadeInUp animation-delay-400"
  />
</header>

<style>
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes gradientFlow {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.8s ease-out forwards;
  }

  .animate-gradientFlow {
    background-size: 200% auto;
    animation: gradientFlow 8s ease infinite;
  }

  .animation-delay-100 {
    animation-delay: 0.1s;
  }

  .animation-delay-200 {
    animation-delay: 0.2s;
  }

  .animation-delay-250 {
    animation-delay: 0.25s;
  }

  .animation-delay-300 {
    animation-delay: 0.3s;
  }

  .animation-delay-400 {
    animation-delay: 0.4s;
  }
</style>
